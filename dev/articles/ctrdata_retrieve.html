<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ctrdata">
<title>Retrieve clinical trial information • ctrdata</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve clinical trial information">
<meta property="og:description" content="ctrdata">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@rfhb">
<meta name="twitter:site" content="@rfhb">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ctrdata</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.9.1.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ctrdata_install.html">Install R package ctrdata</a>
    <a class="dropdown-item" href="../articles/ctrdata_retrieve.html">Retrieve clinical trial information</a>
    <a class="dropdown-item" href="../articles/ctrdata_summarise.html">Summarise and analyse clinical trial information</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rfhb/ctrdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="ctrdata_retrieve_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Retrieve clinical trial information</h1>
                        <h4 data-toc-skip class="author">Ralf Herold</h4>
            
            <h4 data-toc-skip class="date">2022-03-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rfhb/ctrdata/blob/HEAD/vignettes/ctrdata_retrieve.Rmd" class="external-link"><code>vignettes/ctrdata_retrieve.Rmd</code></a></small>
      <div class="d-none name"><code>ctrdata_retrieve.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="get-started">Get started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h2>
<div class="section level3">
<h3 id="attach-package-ctrdata">Attach package <code>ctrdata</code><a class="anchor" aria-label="anchor" href="#attach-package-ctrdata"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cran.r-project.org/package=ctrdata" class="external-link">ctrdata</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"ctrdata"</span><span class="op">)</span></code></pre></div>
<p>Remember to respect the registers’ terms and conditions (see <code>ctrOpenSearchPagesInBrowser(copyright = TRUE)</code>). Please cite this package in any publication as follows: Ralf Herold (2022). ctrdata: Retrieve and Analyze Clinical Trials in Public Registers. R package version 1.9.0. <a href="https://cran.r-project.org/package=ctrdata" class="external-link uri">https://cran.r-project.org/package=ctrdata</a></p>
</div>
<div class="section level3">
<h3 id="open-registers-advanced-search-page-in-browser">Open register’s advanced search page in browser<a class="anchor" aria-label="anchor" href="#open-registers-advanced-search-page-in-browser"></a>
</h3>
<p>These functions open the browser, where the user can start searching for trials of interest.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Please review and respect register copyrights:</span>
<span class="fu"><a href="../reference/ctrOpenSearchPagesInBrowser.html">ctrOpenSearchPagesInBrowser</a></span><span class="op">(</span>
  copyright <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="co"># Open browser with example search:</span>
<span class="fu"><a href="../reference/ctrOpenSearchPagesInBrowser.html">ctrOpenSearchPagesInBrowser</a></span><span class="op">(</span>
  url <span class="op">=</span> <span class="st">"cancer&amp;age=under-18"</span>,
  register <span class="op">=</span> <span class="st">"EUCTR"</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjust-search-parameters-and-execute-search-in-browser">Adjust search parameters and execute search in browser<a class="anchor" aria-label="anchor" href="#adjust-search-parameters-and-execute-search-in-browser"></a>
</h3>
<p>Refine the search until the trials of interest are listed in the browser. The total number of trials that can be retrieved with package <code>ctrdata</code> is intentionally limited to queries with at most 10000 result records.</p>
</div>
<div class="section level3">
<h3 id="copy-address-from-browser-address-bar-to-clipboard">Copy address from browser address bar to clipboard<a class="anchor" aria-label="anchor" href="#copy-address-from-browser-address-bar-to-clipboard"></a>
</h3>
<p>Use functions or keyboard shortcuts according to the operating system.</p>
</div>
<div class="section level3">
<h3 id="get-address-from-clipboard">Get address from clipboard<a class="anchor" aria-label="anchor" href="#get-address-from-clipboard"></a>
</h3>
<p>The next steps are executed in the R environment:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">q</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ctrGetQueryUrl.html">ctrGetQueryUrl</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># * Using clipboard content as register query URL: https://www.clinicaltrialsregister.eu/ctr-search/search?query=cancer&amp;age=under-18&amp;status=completed&amp;phase=phase-one</span>
<span class="co"># * Found search query from EUCTR: query=cancer&amp;age=under-18&amp;status=completed&amp;phase=phase-one</span>

<span class="va">q</span>
<span class="co">#                                                   query-term  query-register</span>
<span class="co"># 1 query=cancer&amp;age=under-18&amp;status=completed&amp;phase=phase-one           EUCTR</span>

<span class="co"># To check, this opens a browser with the query</span>
<span class="fu"><a href="../reference/ctrOpenSearchPagesInBrowser.html">ctrOpenSearchPagesInBrowser</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">q</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retrieve-protocol-related-information-transform-save-to-database-check">Retrieve protocol-related information, transform, save to database, check<a class="anchor" aria-label="anchor" href="#retrieve-protocol-related-information-transform-save-to-database-check"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Count number of trial records</span>
<span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span>
  queryterm <span class="op">=</span> <span class="va">q</span>,
  only.count <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span><span class="op">$</span><span class="va">n</span>
<span class="co"># (1/3) Checking trials in EUCTR:</span>
<span class="co"># Retrieved overview, multiple records of 71 trial(s) from 4 page(s) to be downloaded</span>
<span class="co"># [1] 71</span>

<span class="co"># Connect to a database and chose a table / collection</span>
<span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_sqlite.html" class="external-link">src_sqlite</a></span><span class="op">(</span>
  dbname <span class="op">=</span> <span class="st">"sqlite_file.sql"</span>,
  collection <span class="op">=</span> <span class="st">"test"</span>
<span class="op">)</span>

<span class="co"># Retrieve records, download into database</span>
<span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span>
  queryterm <span class="op">=</span> <span class="va">q</span>,
  con <span class="op">=</span> <span class="va">db</span>
<span class="op">)</span>
<span class="co"># Checking helper binaries: done</span>
<span class="co"># (1/3) Checking trials in EUCTR:</span>
<span class="co"># Retrieved overview, multiple records of 71 trial(s) from 4 page(s) to be downloaded</span>
<span class="co"># Downloading trials (4 pages in parallel)...</span>
<span class="co"># Note: register server cannot compress data, transfer takes longer, about 0.4s per trial</span>
<span class="co"># Pages: 4 done, 0 ongoing</span>
<span class="co"># (2/3) Converting to JSON, 281 records converted</span>
<span class="co"># (3/3) Importing JSON records into database...</span>
<span class="co"># = Imported or updated 281 records on 71 trial(s)</span>
<span class="co"># Updated history ("meta-info" in "test")</span>

<span class="co"># Show which queries have been downloaded into database</span>
<span class="fu"><a href="../reference/dbQueryHistory.html">dbQueryHistory</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">db</span><span class="op">)</span>
<span class="co">#       query-timestamp query-register query-records</span>
<span class="co"># 1 2022-03-19 09:41:36          EUCTR           281</span>
<span class="co">#                                                   query-term</span>
<span class="co"># 1 query=cancer&amp;age=under-18&amp;status=completed&amp;phase=phase-one</span></code></pre></div>
<p>With a file-base SQLite database, this takes about 20 seconds for about 300 records, with most of the time needed for internet-retrieval with is slow from this register. Speed is higher with other registers, with using MongoDB and with memory-based SQLite.</p>
</div>
</div>
<div class="section level2">
<h2 id="repeat-and-update-a-previous-query">Repeat and update a previous query<a class="anchor" aria-label="anchor" href="#repeat-and-update-a-previous-query"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span>
  querytoupdate <span class="op">=</span> <span class="st">"last"</span>,
  con <span class="op">=</span> <span class="va">db</span>
<span class="op">)</span></code></pre></div>
<p>Instead of “last”, an integer number can be specified for <code>querytoupdate</code> that corresponds to the number when using <code><a href="../reference/dbQueryHistory.html">dbQueryHistory()</a></code>.</p>
<p>Depending on the register, an update (differential update) is possible or the original query is executed fully again.</p>
</div>
<div class="section level2">
<h2 id="retrieve-results">Retrieve results<a class="anchor" aria-label="anchor" href="#retrieve-results"></a>
</h2>
<p>For EUCTR, result-related trial information has to be requested to be retrieved, because it will take longer to download and store. For CTGOV, any results are always included in the retrieval.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span>
  queryterm <span class="op">=</span> <span class="va">q</span>,
  euctrresults <span class="op">=</span> <span class="cn">TRUE</span>,
  con <span class="op">=</span> <span class="va">db</span>
<span class="op">)</span>
<span class="co"># Checking helper binaries: done</span>
<span class="co"># (1/3) Checking trials in EUCTR:</span>
<span class="co"># Retrieved overview, multiple records of 71 trial(s) from 4 page(s) to be downloaded</span>
<span class="co"># Downloading trials (4 pages in parallel)...</span>
<span class="co"># Note: register server cannot compress data, transfer takes longer, about 0.2s per trial</span>
<span class="co"># Pages: 4 done, 0 ongoing</span>
<span class="co"># (2/3) Converting to JSON, 281 records converted</span>
<span class="co"># (3/3) Importing JSON records into database...</span>
<span class="co"># = Imported or updated 281 records on 71 trial(s)</span>
<span class="co"># Retrieving results if available from EUCTR for 71 trials:</span>
<span class="co"># (1/4) Downloading results (max. 10 trials in parallel):</span>
<span class="co"># 71 downloaded, extracting x x x x x . x . PDF . . . x . . . x PDF . PDF . . PDF . x . .</span>
<span class="co"># x . . x x . . x . . . . . . . . . . . . . . x . . . . . . PDF . . . . . . . . . . . .</span>
<span class="co"># PDF . . . . . PDF . PDF .</span>
<span class="co"># (2/3) Converting to JSON, 57 records converted</span>
<span class="co"># (3/4) Importing JSON into database...</span>
<span class="co"># (4/4) Results history: not retrieved (euctrresultshistory = FALSE)</span>
<span class="co"># = Imported or updated results for 57 trials</span>
<span class="co"># Updated history ("meta-info" in "test")</span></code></pre></div>
<p>With a file-base SQLite database, this takes about 4 minutes for about 300 records, with most of the time needed for merging result- and protocol-related information in SQLite; this is much faster with MongoDB and PostgreSQL.</p>
<p>The download or presence of results is not recorded in <code><a href="../reference/dbQueryHistory.html">dbQueryHistory()</a></code> because the availability of results increases over time.</p>
</div>
<div class="section level2">
<h2 id="add-information-from-another-register">Add information from another register<a class="anchor" aria-label="anchor" href="#add-information-from-another-register"></a>
</h2>
<p>The same collection can be used to store (and analyse) trial information from different registers. At the moment, <code>ctrdata</code> supports three registers: <a href="https://ClinicalTrials.Gov/" class="external-link uri">https://ClinicalTrials.Gov/</a>, <a href="https://ClinicalTrialsRegister.EU/" class="external-link uri">https://ClinicalTrialsRegister.EU/</a> and <a href="https://www.ISRCTN.com/" class="external-link uri">https://www.ISRCTN.com/</a>. Example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span>
  queryterm <span class="op">=</span> <span class="st">"https://clinicaltrials.gov/ct2/results?cond=neuroblastoma&amp;recrs=e&amp;age=0&amp;intr=Drug"</span>,
  con <span class="op">=</span> <span class="va">db</span>
<span class="op">)</span>
<span class="co"># * Found search query from CTGOV: cond=neuroblastoma&amp;recrs=e&amp;age=0&amp;intr=Drug</span>
<span class="co"># Checking helper binaries: done</span>
<span class="co"># (1/3) Checking trials in CTGOV:</span>
<span class="co"># Retrieved overview, records of 200 trial(s) are to be downloaded (estimate: 1.6 MB)</span>
<span class="co"># Downloading: 1.4 MB</span>
<span class="co"># (2/3) Converting to JSON, 200 records converted</span>
<span class="co"># (3/3) Importing JSON records into database...</span>
<span class="co"># = Imported or updated 175 trial(s)</span>
<span class="co"># Updated history ("meta-info" in "test")</span>

<span class="co"># Warning message:</span>
<span class="co"># [...]/ctrDATA15bc13c33351a/ctgov_trials_7.ndjson: Error : C stack usage  8342562 is too close to the limit</span></code></pre></div>
<p>With a file-base SQLite database, this takes about 10 seconds for about 200 records.</p>
<p>Note that in this example, a warning message is issued from importing an NDJSON file with trial records. The warning arises from the high level of complexity of some of the XML content of some of the trial records. The issue can be resolved by increasing in the operating system the stack size available to R, see: <a href="https://github.com/rfhb/ctrdata/issues/22" class="external-link uri">https://github.com/rfhb/ctrdata/issues/22</a></p>
</div>
<div class="section level2">
<h2 id="add-personal-annotations">Add personal annotations<a class="anchor" aria-label="anchor" href="#add-personal-annotations"></a>
</h2>
<p>When downloading trial information, the user can specify an annotation to all records that are downloaded. By default, annotations are accumulated if trial records are loaded again or updated; alternatively, annotations can be replaced.</p>
<p>Annotations are useful for analyses, for example to specially identify subsets of records in the database.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span>
  queryterm <span class="op">=</span> <span class="st">"https://clinicaltrials.gov/ct2/results?cond=neuroblastoma&amp;recrs=e&amp;age=0&amp;intr=Drug&amp;cntry=DE"</span>,
  annotation.text <span class="op">=</span> <span class="st">"site_DE "</span>,
  annotation.mode <span class="op">=</span> <span class="st">"append"</span>,
  con <span class="op">=</span> <span class="va">db</span>
<span class="op">)</span>
<span class="co"># * Found search query from CTGOV: cond=neuroblastoma&amp;recrs=e&amp;age=0&amp;intr=Drug&amp;cntry=DE</span>
<span class="co"># Checking helper binaries: done</span>
<span class="co"># (1/3) Checking trials in CTGOV:</span>
<span class="co"># Retrieved overview, records of 11 trial(s) are to be downloaded (estimate: 0.088 MB)</span>
<span class="co"># Downloading: 69 kB     </span>
<span class="co"># (2/3) Converting to JSON, 11 records converted</span>
<span class="co"># (3/3) Importing JSON records into database...</span>
<span class="co"># = Imported or updated 11 trial(s)                </span>
<span class="co"># = Annotated retrieved records (11 records)</span>
<span class="co"># Updated history ("meta-info" in "test")</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="find-synonyms-of-active-substance-names">Find synonyms of active substance names<a class="anchor" aria-label="anchor" href="#find-synonyms-of-active-substance-names"></a>
</h2>
<p>Not all registers automatically expand search terms to include alternative terms, such as codes and other names of active substances. To obtain a character vector of synonyms for any active substance name, use:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ctrFindActiveSubstanceSynonyms.html">ctrFindActiveSubstanceSynonyms</a></span><span class="op">(</span>
  activesubstance <span class="op">=</span> <span class="st">"imatinib"</span>
<span class="op">)</span>
<span class="co"># [1] "imatinib"  "gleevec" "sti 571" "glivec" "CGP 57148" "st1571"</span></code></pre></div>
<p>These names can then be used in queries in any register.</p>
</div>
<div class="section level2">
<h2 id="using-a-mongodb-database">Using a MongoDB database<a class="anchor" aria-label="anchor" href="#using-a-mongodb-database"></a>
</h2>
<p>This example works with a free service <a href="https://www.mongodb.com/cloud/atlas" class="external-link">here</a>. Note that the user name and password need to be encoded. The format of the connection string is documented at <a href="https://docs.mongodb.com/manual/reference/connection-string/" class="external-link uri">https://docs.mongodb.com/manual/reference/connection-string/</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Specify base uri for remote MongoDB server,</span>
<span class="co">#  as part of the encoded connection string</span>
<span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_mongo.html" class="external-link">src_mongo</a></span><span class="op">(</span>
  <span class="co"># Note: this provides read-only access</span>
  url <span class="op">=</span> <span class="st">"mongodb+srv://DWbJ7Wh:bdTHh5cS@cluster0-b9wpw.mongodb.net"</span>,
  db <span class="op">=</span> <span class="st">"dbperm"</span>,
  collection <span class="op">=</span> <span class="st">"dbperm"</span><span class="op">)</span>

<span class="co"># Since the above access is read-only,</span>
<span class="co"># just obtain fields of interest:</span>
<span class="fu"><a href="../reference/dbGetFieldsIntoDf.html">dbGetFieldsIntoDf</a></span><span class="op">(</span>
  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a2_eudract_number"</span>,
             <span class="st">"e71_human_pharmacology_phase_i"</span><span class="op">)</span>,
  con <span class="op">=</span> <span class="va">db</span><span class="op">)</span>
<span class="co">#                  _id a2_eudract_number e71_human_pharmacology_phase_i</span>
<span class="co"># 1 2010-024264-18-3RD    2010-024264-18                           TRUE</span>
<span class="co"># 2  2010-024264-18-AT    2010-024264-18                           TRUE</span>
<span class="co"># 3  2010-024264-18-DE    2010-024264-18                           TRUE</span>
<span class="co"># 4  2010-024264-18-GB    2010-024264-18                           TRUE</span>
<span class="co"># 5  2010-024264-18-IT    2010-024264-18                           TRUE</span>
<span class="co"># 6  2010-024264-18-NL    2010-024264-18                           TRUE</span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ralf Herold.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
