<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Retrieve clinical trial information • ctrdata</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve clinical trial information">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ctrdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.26.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ctrdata_install.html">Install R package ctrdata</a></li>
    <li><a class="dropdown-item" href="../articles/ctrdata_retrieve.html">Retrieve clinical trial information</a></li>
    <li><a class="dropdown-item" href="../articles/ctrdata_summarise.html">Summarise and analyse clinical trial information</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rfhb/ctrdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Retrieve clinical trial information</h1>
                        <h4 data-toc-skip class="author">Ralf
Herold</h4>
            
            <h4 data-toc-skip class="date">2025-07-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rfhb/ctrdata/blob/HEAD/vignettes/ctrdata_retrieve.Rmd" class="external-link"><code>vignettes/ctrdata_retrieve.Rmd</code></a></small>
      <div class="d-none name"><code>ctrdata_retrieve.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="get-started">Get started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h2>
<div class="section level3">
<h3 id="attach-package-ctrdata">Attach package <code>ctrdata</code><a class="anchor" aria-label="anchor" href="#attach-package-ctrdata"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cran.r-project.org/package=ctrdata" class="external-link">ctrdata</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"ctrdata"</span><span class="op">)</span></span></code></pre></div>
<p>Remember to respect the registers’ terms and conditions (see
<code>ctrOpenSearchPagesInBrowser(copyright = TRUE)</code>). Please cite
this package in any publication as follows: Ralf Herold (2025). ctrdata:
Retrieve and Analyze Clinical Trials in Public Registers. R package
version 1.23.0. <a href="https://cran.r-project.org/package=ctrdata" class="external-link uri">https://cran.r-project.org/package=ctrdata</a></p>
</div>
<div class="section level3">
<h3 id="open-registers-advanced-search-page-in-browser">Open register’s advanced search page in browser<a class="anchor" aria-label="anchor" href="#open-registers-advanced-search-page-in-browser"></a>
</h3>
<p>These functions open the browser, where the user can start searching
for trials of interest.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Please review and respect register copyrights:</span></span>
<span><span class="fu"><a href="../reference/ctrOpenSearchPagesInBrowser.html">ctrOpenSearchPagesInBrowser</a></span><span class="op">(</span></span>
<span>  copyright <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open browser with example search:</span></span>
<span><span class="fu"><a href="../reference/ctrOpenSearchPagesInBrowser.html">ctrOpenSearchPagesInBrowser</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"cancer&amp;age=under-18&amp;resultsstatus=trials-with-results"</span>,</span>
<span>  register <span class="op">=</span> <span class="st">"EUCTR"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjust-search-parameters-and-execute-search-in-browser">Adjust search parameters and execute search in browser<a class="anchor" aria-label="anchor" href="#adjust-search-parameters-and-execute-search-in-browser"></a>
</h3>
<p>Refine the search until the trials of interest are listed in the
browser. The total number of trials that can be retrieved with package
<code>ctrdata</code> is intentionally limited to queries with at most
10,000 result records.</p>
</div>
<div class="section level3">
<h3 id="copy-address-from-browser-address-bar-to-clipboard">Copy address from browser address bar to clipboard<a class="anchor" aria-label="anchor" href="#copy-address-from-browser-address-bar-to-clipboard"></a>
</h3>
<p>Use functions or keyboard shortcuts according to the operating
system.</p>
<p>See <a href="https://rfhb.github.io/ctrdata/#id_2-script-to-automatically-copy-users-query-from-web-browser">here</a>
for our automation to copy the URLs of a user’s queries in any of the
supported clinical trial registers.</p>
</div>
<div class="section level3">
<h3 id="get-address-from-clipboard">Get address from clipboard<a class="anchor" aria-label="anchor" href="#get-address-from-clipboard"></a>
</h3>
<p>The next steps are executed in the R environment:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ctrGetQueryUrl.html">ctrGetQueryUrl</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># * Using clipboard content as register query URL: https://www.clinicaltrialsregister.eu/</span></span>
<span><span class="co"># ctr-search/search?query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># * Found search query from EUCTR: query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span></span>
<span><span class="va">q</span></span>
<span><span class="co">#                                                    query-term  query-register</span></span>
<span><span class="co"># 1 query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results           EUCTR</span></span>
<span></span>
<span><span class="co"># To check, this opens a browser with the query</span></span>
<span><span class="fu"><a href="../reference/ctrOpenSearchPagesInBrowser.html">ctrOpenSearchPagesInBrowser</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">q</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="connect-database-retrieve-transform-save-and-check">Connect database, retrieve, transform, save and check<a class="anchor" aria-label="anchor" href="#connect-database-retrieve-transform-save-and-check"></a>
</h3>
<p>Note that in addition to protocol- and results-related information,
also all trial documents that made publicly available by the registers,
including any protocols, consent forms and results reports, can be
downloaded by <code>ctrdata</code>, by specifying parameter
<code>documents.path</code>, see
<code><a href="../reference/ctrLoadQueryIntoDb.html">help(ctrLoadQueryIntoDb)</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Count number of trial records</span></span>
<span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  queryterm <span class="op">=</span> <span class="va">q</span>,</span>
<span>  only.count <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">n</span></span>
<span><span class="co"># * Found search query from EUCTR: query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># * Checking trials in EUCTR, found 390 trials </span></span>
<span><span class="co"># [1] 392</span></span>
<span></span>
<span><span class="co"># Connect to a database and chose a collection (table)</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_sqlite.html" class="external-link">src_sqlite</a></span><span class="op">(</span></span>
<span>  dbname <span class="op">=</span> <span class="st">"database_name.sql"</span>,</span>
<span>  collection <span class="op">=</span> <span class="st">"test"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve records, load into database</span></span>
<span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  queryterm <span class="op">=</span> <span class="va">q</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># * Found search query from EUCTR: query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># * Checking trials in EUCTR, found 392 trials </span></span>
<span><span class="co"># - Downloading in 20 batch(es) (20 trials each; estimate: 50 MB)</span></span>
<span><span class="co"># - Downloading 1544 records of 392 trials (estimate: 90 s)            </span></span>
<span><span class="co"># - Converting to NDJSON (estimate: 3 s) . . . . . . . . . . . . . . . . . . . </span></span>
<span><span class="co">#   . . . . . . . . . . . . </span></span>
<span><span class="co"># - Importing records into database...</span></span>
<span><span class="co"># = Imported or updated 1544 records on 392 trial(s) </span></span>
<span><span class="co"># No history found in expected format.</span></span>
<span><span class="co"># Updated history ("meta-info" in "test")</span></span>
<span><span class="co"># $n</span></span>
<span><span class="co"># [1] 1544</span></span>
<span></span>
<span><span class="co"># Show which queries have been downloaded into database</span></span>
<span><span class="fu"><a href="../reference/dbQueryHistory.html">dbQueryHistory</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">db</span><span class="op">)</span></span>
<span><span class="co">#       query-timestamp query-register query-records</span></span>
<span><span class="co"># 1 2025-07-20 10:27:25          EUCTR          1544</span></span>
<span><span class="co">#                                                    query-term</span></span>
<span><span class="co"># 1 query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span></code></pre></div>
<p>With any database, this takes about 100 seconds for 1544 records of
392 trials (~265 ms/trial).</p>
</div>
</div>
<div class="section level2">
<h2 id="loading-only-a-single-version-of-euctr-protocol-related-data">Loading only a single version of EUCTR protocol-related data<a class="anchor" aria-label="anchor" href="#loading-only-a-single-version-of-euctr-protocol-related-data"></a>
</h2>
<p>As part of the acceleration of <code>ctrdata</code> operations on the
EUCTR (starting version 1.23.0), it is possible as of 2025-07-20 to
limit protocol-related data to loading a <em>single</em> version instead
of loading versions from <em>all</em> countries in which a trial is
conducted, by setting <code>euctrprotocolsall = FALSE</code> when using
<code><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb()</a></code>.</p>
<p>The background is that EUCTR has protocol records of a trial
separately for every EU Member State (and a third country, if any),
there are often multiple records of a trial to be loaded. Versions of
protocols are mostly identical across Member States, but each version
increases the time needed for loading. In contrast to protocol-related
data which relate to countries, results-data in EUCTR relate to the
trial and only a single version of results is available and loaded per
trial.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve records, load into database</span></span>
<span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  queryterm <span class="op">=</span> <span class="va">q</span>, </span>
<span>  euctrprotocolsall <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># * Found search query from EUCTR: query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># * Checking trials in EUCTR, found 392 trials </span></span>
<span><span class="co"># - Downloading in 20 batch(es) (20 trials each; estimate: 50 MB)</span></span>
<span><span class="co"># - Downloading 392 records of 392 trials (estimate: 20 s)             </span></span>
<span><span class="co"># - Converting to NDJSON (estimate: 0.8 s) . . . . . . . .                </span></span>
<span><span class="co"># - Importing records into database...</span></span>
<span><span class="co"># = Imported or updated 392 records on 392 trial(s)</span></span>
<span><span class="co"># Updated history ("meta-info" in "test")</span></span>
<span><span class="co"># $n</span></span>
<span><span class="co"># [1] 392</span></span></code></pre></div>
<p>When run as alternative to the preceding section, this takes about 35
seconds for 392 records of 392 trials (~90 ms/trial).</p>
</div>
<div class="section level2">
<h2 id="repeat-and-update-a-previous-query">Repeat and update a previous query<a class="anchor" aria-label="anchor" href="#repeat-and-update-a-previous-query"></a>
</h2>
<p>Previously executed queries can be repeated by specifying “last” or
an integer number for parameter <code>querytoupdate</code>, where the
number corresponds to the row number of the query shown with
<code><a href="../reference/dbQueryHistory.html">dbQueryHistory()</a></code>. Where possible, the query to update first
checks for new records in the register. Depending on the register and
time since running the query last, an update (differential update) is
possible or the original query is executed fully again.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show all queries</span></span>
<span><span class="fu"><a href="../reference/dbQueryHistory.html">dbQueryHistory</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">db</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Repeat last query</span></span>
<span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  querytoupdate <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  only.count <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Found search query from EUCTR: query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># * Query last run: 2025-07-02 20:27:25</span></span>
<span><span class="co"># * Checking for new or updated trials...</span></span>
<span><span class="co"># First result page empty - no (new) trials found?</span></span>
<span><span class="co"># Updated history ("meta-info" in "test")</span></span>
<span><span class="co"># $n</span></span>
<span><span class="co"># [1] 0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="results-related-trial-information">Results-related trial information<a class="anchor" aria-label="anchor" href="#results-related-trial-information"></a>
</h2>
<p>For CTGOV and CTGOV2, any results are always included in the
retrieval. Only for EUCTR, result-related trial information has to be
requested to be retrieved, because it will take longer to download and
store. No results in structured electronic format are foreseeably
available from ISRCTN and CTIS, thus <code>ctrdata</code> cannot load
them, see <code><a href="../reference/ctrLoadQueryIntoDb.html">help(ctrLoadQueryIntoDb)</a></code>. The download or
presence of results is not recorded in <code><a href="../reference/dbQueryHistory.html">dbQueryHistory()</a></code>
because the availability of results increases over time. The following
takes in total only 120 seconds for 1541 records (~ 80 ms/record) of 390
trials, if run in the same R session as the above commands and thus
re-using previous downloads of trials.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  querytoupdate <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  forcetoupdate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  euctrresults <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># * Found search query from EUCTR: query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># * Query last run: 2025-07-02 20:27:25</span></span>
<span><span class="co"># * Checking trials in EUCTR, found 390 trials </span></span>
<span><span class="co"># - Downloading in 20 batch(es) (20 trials each; estimate: 50 MB)</span></span>
<span><span class="co"># - Downloading 1541 records of 390 trials (estimate: 90 s)</span></span>
<span><span class="co"># - Converting to NDJSON (estimate: 3 s) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span></span>
<span><span class="co"># - Importing records into database...</span></span>
<span><span class="co"># = Imported or updated 1541 records on 390 trial(s) </span></span>
<span><span class="co"># * Checking results if available from EUCTR for 390 trials: </span></span>
<span><span class="co"># - Downloading results...</span></span>
<span><span class="co"># - Extracting results (. = data, F = file[s] and data, x = none): F F . . . . </span></span>
<span><span class="co"># F . . F . . . F . . F F F . . . . F F F . . F . . . . F F . F . . . . . . . . </span></span>
<span><span class="co"># F . . . . . . . . . . . F . F . . . . . . . F . . . . . . . . . . . . . . . F </span></span>
<span><span class="co"># . . . . . . F . . F F F . . . . F F . . F . . . . . . . . . . . F . . . . . . </span></span>
<span><span class="co"># . F . . . . . . . . . . . F . . . . . . F . . . . . . . . . F . F . . . . . .</span></span>
<span><span class="co"># . . . . . F . . . F F . . F . . . . . . . . . . . . F . . . . . F . . . . . . </span></span>
<span><span class="co"># F . . . . . F . . . F F . . . . . . F . F . . . . . F . . F . . . . F . . . . </span></span>
<span><span class="co"># . . . . . . . . . F F . F . . . F . . . F F . . . . . . . . . . . F . . . . F </span></span>
<span><span class="co"># . . . . . . F F . F . . . . . . . . . . F F . F F . . . . F F . . . F . F . . </span></span>
<span><span class="co"># . F . . . . . . . . . . . F . F . . . . . F . F . . . F . F . . F . F . . F . </span></span>
<span><span class="co"># . . . F F F . . . . . . . . . . . . F . . . . . . . . . . . . . . </span></span>
<span><span class="co"># - Converting to NDJSON (estimate: 40 s)...</span></span>
<span><span class="co"># - Importing results into database (may take some time)...</span></span>
<span><span class="co"># - Results history: not retrieved (euctrresultshistory = FALSE)</span></span>
<span><span class="co"># = Imported or updated results for 390 trials</span></span>
<span><span class="co"># Updated history ("meta-info" in "test")</span></span>
<span><span class="co"># $n</span></span>
<span><span class="co"># [1] 1541</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add-trial-information-from-several-registers">Add trial information from several registers<a class="anchor" aria-label="anchor" href="#add-trial-information-from-several-registers"></a>
</h2>
<p>The same collection can be used to store (and analyse) trial
information from different registers, thus can include different and
complementary sets of trials. The registers currently supported include
CTIS, EUCTR, CTGOV, CTGOV2 and ISRCTN. This can be achieved by loading
queries that the user defines specifically or that function
<code><a href="../reference/ctrGenerateQueries.html">ctrGenerateQueries()</a></code> provides, as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading specific query into same collection</span></span>
<span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  queryterm <span class="op">=</span> <span class="st">"cond=neuroblastoma&amp;aggFilters=phase:2,ages:child,status:com"</span>,</span>
<span>  register <span class="op">=</span> <span class="st">"CTGOV2"</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># * Found search query from CTGOV2: cond=neuroblastoma&amp;aggFilters=phase:2,ages:child,status:com</span></span>
<span><span class="co"># * Checking trials in CTGOV, found 110 trials</span></span>
<span><span class="co"># - Downloading in 1 batch(es) (max. 1000 trials each; estimate: 11 Mb total)</span></span>
<span><span class="co"># - Converting to NDJSON...</span></span>
<span><span class="co"># - Importing records into database...</span></span>
<span><span class="co"># JSON file #: 1 / 1                               </span></span>
<span><span class="co"># = Imported or updated 110 trial(s)</span></span>
<span><span class="co"># Updated history ("meta-info" in "test")</span></span>
<span><span class="co"># $n</span></span>
<span><span class="co"># [1] 110</span></span>
<span></span>
<span><span class="co"># Use same query details to obtain queries</span></span>
<span><span class="va">queries</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ctrGenerateQueries.html">ctrGenerateQueries</a></span><span class="op">(</span></span>
<span>  condition <span class="op">=</span> <span class="st">"neuroblastoma"</span>,</span>
<span>  recruitment <span class="op">=</span> <span class="st">"completed"</span>,</span>
<span>  phase <span class="op">=</span> <span class="st">"phase 2"</span>,</span>
<span>  population <span class="op">=</span> <span class="st">"P"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open queries in registers' web interfaces</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">queries</span>, <span class="va">ctrOpenSearchPagesInBrowser</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load all queries into database collection</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">queries</span>, <span class="va">ctrLoadQueryIntoDb</span>, con <span class="op">=</span> <span class="va">db</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show results of loading</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"[["</span>, <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="co"># EUCTR       ISRCTN       CTGOV2 CTGOV2expert         CTIS </span></span>
<span><span class="co">#   180            0          110          110            1 </span></span>
<span></span>
<span><span class="co"># Overview of queries</span></span>
<span><span class="fu"><a href="../reference/dbQueryHistory.html">dbQueryHistory</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">db</span><span class="op">)</span></span>
<span><span class="co">#       query-timestamp query-register query-records</span></span>
<span><span class="co"># 1 2025-07-02 20:27:25          EUCTR          1541</span></span>
<span><span class="co"># 2 2025-07-02 20:30:46          EUCTR             0</span></span>
<span><span class="co"># 3 2025-07-02 20:33:38          EUCTR          1541</span></span>
<span><span class="co"># 4 2025-07-02 20:39:41         CTGOV2           110</span></span>
<span><span class="co"># 5 2025-07-02 20:40:18          EUCTR           180</span></span>
<span><span class="co"># 6 2025-07-02 20:40:20         CTGOV2           110</span></span>
<span><span class="co"># 7 2025-07-02 20:40:21         CTGOV2           110</span></span>
<span><span class="co"># 8 2025-07-02 20:40:22           CTIS             1</span></span>
<span><span class="co">#query-term</span></span>
<span><span class="co"># 1 query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># 2 query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># 3 query=cancer&amp;age=under-18&amp;resultsstatus=trials-with-results</span></span>
<span><span class="co"># 4 cond=neuroblastoma&amp;aggFilters=phase:2,ages:child,status:com</span></span>
<span><span class="co"># 5 query=neuroblastoma&amp;phase=phase-two&amp;age=children&amp;age=adolescent&amp;age=infant-and-toddler&amp;age=newborn&amp;age=preterm-new-born-infants&amp;age=under-18&amp;status=completed</span></span>
<span><span class="co"># 6 cond=neuroblastoma&amp;aggFilters=phase:2,ages:child,status:com,studyType:int</span></span>
<span><span class="co"># 7 term=AREA[ConditionSearch]"neuroblastoma" AND (AREA[Phase]"PHASE2") AND (AREA[StdAge]"CHILD") AND (AREA[OverallStatus]"COMPLETED") AND (AREA[StudyType]INTERVENTIONAL)</span></span>
<span><span class="co"># 8 searchCriteria={"medicalCondition":"neuroblastoma","trialPhaseCode":[4],"ageGroupCode":[2],"status":[5,8]}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add-personal-annotations">Add personal annotations<a class="anchor" aria-label="anchor" href="#add-personal-annotations"></a>
</h2>
<p>When loading trial information, the user can specify an annotation
string to each of the records that are loaded when calling
<code><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb()</a></code>. By default, new annotations are
appended to any existing annotation of the trial record; alternatively,
annotations can be replaced. Annotations are useful for analyses, for
example to specially identify subsets of records and trials of interest
in the collection</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Annotate a query in CTGOV2 defined above</span></span>
<span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>  queryterm <span class="op">=</span> <span class="va">queries</span><span class="op">[</span><span class="st">"CTGOV2"</span><span class="op">]</span>,</span>
<span>  annotation.text <span class="op">=</span> <span class="st">"site_DE "</span>,</span>
<span>  annotation.mode <span class="op">=</span> <span class="st">"append"</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># * Found search query from CTGOV2: cond=neuroblastoma&amp;aggFilters=phase:2,ages:child,status:com,studyType:int</span></span>
<span><span class="co"># * Checking trials in CTGOV, found 110 trials</span></span>
<span><span class="co"># - Downloading in 1 batch(es) (max. 1000 trials each; estimate: 11 Mb total)</span></span>
<span><span class="co"># - Converting to NDJSON...</span></span>
<span><span class="co"># - Importing records into database...</span></span>
<span><span class="co"># JSON file #: 1 / 1                               </span></span>
<span><span class="co"># = Imported or updated 110 trial(s)</span></span>
<span><span class="co"># = Annotated retrieved records (110 records)</span></span>
<span><span class="co"># Updated history ("meta-info" in "test")</span></span>
<span><span class="co"># $n</span></span>
<span><span class="co"># [1] 110</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="find-synonyms-of-active-substance-names">Find synonyms of active substance names<a class="anchor" aria-label="anchor" href="#find-synonyms-of-active-substance-names"></a>
</h2>
<p>Not all registers automatically expand search terms to include
alternative terms, such as codes and other names of active substances.
The synonymous names can be used in queries in a register that does not
offer search expansion. To obtain a character vector of synonyms for an
active substance name:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search for synonyms</span></span>
<span><span class="fu"><a href="../reference/ctrFindActiveSubstanceSynonyms.html">ctrFindActiveSubstanceSynonyms</a></span><span class="op">(</span></span>
<span>  activesubstance <span class="op">=</span> <span class="st">"imatinib"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#  [1] "imatinib"          "CGP 57148"         "CGP 57148B"</span></span>
<span><span class="co">#  [4] "CGP57148B"         "Gleevec"           "GLIVEC"</span></span>
<span><span class="co">#  [7] "Imatinib"          "Imatinib Mesylate" "NSC 716051"</span></span>
<span><span class="co"># [10] "ST1571"            "STI 571"           "STI571"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="find-platform-trials">Find platform trials<a class="anchor" aria-label="anchor" href="#find-platform-trials"></a>
</h2>
<p>The interest is increasing to design and use integrated research
platforms, clinical research platforms, platform trials, multi-arm
multi-stage (MAMS) and master protocol research programs (MPRPs).
Additional concepts and terms used include basket and umbrella trials,
and in particular complex trials. Please see the references below for
further information. <code>ctrdata</code> can help finding such research
and analysing the study information, as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate queries to identify trials</span></span>
<span><span class="va">queries</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ctrGenerateQueries.html">ctrGenerateQueries</a></span><span class="op">(</span></span>
<span>  searchPhrase <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"basket OR platform OR umbrella OR master protocol OR "</span>,</span>
<span>    <span class="st">"multiarm OR multistage OR subprotocol OR substudy OR "</span>,</span>
<span>    <span class="st">"multi-arm OR multi-stage OR sub-protocol OR sub-study"</span><span class="op">)</span>, </span>
<span>  startAfter <span class="op">=</span> <span class="st">"2015-01-01"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># See </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"ctrGenerateQueries"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open queries in register web interface</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">queries</span>, <span class="va">ctrOpenSearchPagesInBrowser</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Count number of studies found in the register</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">queries</span>, <span class="va">ctrLoadQueryIntoDb</span>, only.count <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"[["</span>, <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="co"># EUCTR       ISRCTN       CTGOV2 CTGOV2expert         CTIS </span></span>
<span><span class="co">#  1635          165         1559         1559          237 </span></span>
<span></span>
<span><span class="co"># Note that for EUCTR, the number of trials is shown; </span></span>
<span><span class="co"># since each trial can have multiple records in this</span></span>
<span><span class="co"># register, the number is higher when actually loaded</span></span>
<span></span>
<span><span class="co"># Connect to a database and chose a collection (table)</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_sqlite.html" class="external-link">src_sqlite</a></span><span class="op">(</span></span>
<span>  dbname <span class="op">=</span> <span class="st">"database_name.sql"</span>,</span>
<span>  collection <span class="op">=</span> <span class="st">"test"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load studies, include EUCTR results data for analysis</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">queries</span>, <span class="va">ctrLoadQueryIntoDb</span>, con <span class="op">=</span> <span class="va">db</span>, euctrresults <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">result</span>, <span class="st">"[["</span>, <span class="st">"n"</span><span class="op">)</span></span>
<span><span class="co"># EUCTR       ISRCTN       CTGOV2 CTGOV2expert         CTIS </span></span>
<span><span class="co">#  7673          166         1562         1562          243 </span></span>
<span></span>
<span><span class="co"># See next section for adding related trials</span></span></code></pre></div>
<p>References:</p>
<ul>
<li><a href="https://web.archive.org/web/20230314024441/https://eu-pearl.eu/wp-content/uploads/2020/06/EU-PEARL_D2.1_Report-on-Terminology-and-Scenarios-for-Platform-Trials-and-Masterprotocols.pdf" class="external-link">EU-PEARL.
2023. ‘D2.1. Report on Terminology, References and Scenarios for
Platform Trials and Master Protocols’</a></li>
<li><a href="https://health.ec.europa.eu/system/files/2022-06/medicinal_qa_complex_clinical-trials_en.pdf" class="external-link">EC
/ EMA / HMA. 2022. ‘Complex Clinical Trials – Questions and Answers’.
EMA/298712/2022</a></li>
<li><a href="https://doi.org/10.1136/bmj-2021-067745" class="external-link">Williams RJ et
al. 2022. ‘Approach for Reporting Master Protocol Study Designs on
ClinicalTrials.Gov: Qualitative Analysis’. The BMJ 377
(June):e067745</a></li>
<li><a href="https://www.hma.eu/fileadmin/dateien/Human_Medicines/01-About_HMA/Working_Groups/CTFG/2019_02_CTFG_Recommendation_paper_on_Complex_Clinical_Trials.pdf" class="external-link">Clinical
Trials Facilitation and Coordination Group (CTFG). 2019. ‘Recommendation
Paper on the Initiation and Conduct of Complex Clinical Trials’</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="load-information-using-trial-identifiers">Load information using trial identifiers<a class="anchor" aria-label="anchor" href="#load-information-using-trial-identifiers"></a>
</h2>
<p>When identifiers of clinical trials of interest are already known,
this example shows how they can be processed to import the trial
information into a database collection. This involves constructing a
query that combines the identifiers and then iterating over the sets of
identifiers. Note to combine identifiers into the <code>queryterm</code>
depends on the specific register.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use a trial concept to calculate related identifiers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"ctrdata-trial-concepts"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get data from trials loaded above</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dbGetFieldsIntoDf.html">dbGetFieldsIntoDf</a></span><span class="op">(</span></span>
<span>  fields <span class="op">=</span> <span class="st">"ctrname"</span>,</span>
<span>  calculate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"f.isUniqueTrial"</span>,</span>
<span>    <span class="st">"f.likelyPlatformTrial"</span>,</span>
<span>    <span class="st">"f.trialTitle"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  con <span class="op">=</span> <span class="va">db</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># To review trial concepts details, call 'help("ctrdata-trial-concepts")'</span></span>
<span><span class="co"># Querying database (25 fields)...</span></span>
<span><span class="co"># Searching for duplicate trials...                         </span></span>
<span><span class="co"># - Getting all trial identifiers (may take some time), 9644 found in collection</span></span>
<span><span class="co"># - Finding duplicates among registers' and sponsor ids...</span></span>
<span><span class="co"># - 5596 EUCTR _id were not preferred EU Member State record for 1767 trials</span></span>
<span><span class="co"># - Keeping 1562 / 1479 / 0 / 124 / 98 records from CTGOV2 / EUCTR / CTGOV / ISRCTN / CTIS</span></span>
<span><span class="co"># = Returning keys (_id) of 3263 records in collection "test"</span></span>
<span><span class="co"># Searching for duplicate trials... ..                            </span></span>
<span><span class="co"># - Getting all trial identifiers, 9644 found in collection</span></span>
<span><span class="co"># Calculating f.trialTitle...    </span></span>
<span></span>
<span><span class="co"># Show names of calculated columns in the</span></span>
<span><span class="co"># data frame with possible platform trials</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co"># [1] "_id"                 </span></span>
<span><span class="co"># [2] "ctrname"             </span></span>
<span><span class="co"># [3] ".isUniqueTrial"      </span></span>
<span><span class="co"># [4] ".likelyPlatformTrial"</span></span>
<span><span class="co"># [5] ".likelyRelatedTrials"</span></span>
<span><span class="co"># [6] ".maybeRelatedTrials" </span></span>
<span><span class="co"># [7] ".trialTitle" </span></span>
<span></span>
<span><span class="co"># Reduce to unique trials</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">.isUniqueTrial</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co"># [1] 3263</span></span>
<span></span>
<span><span class="co"># Number of recognised set of trials</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">.maybeRelatedTrials</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># 181</span></span>
<span></span>
<span><span class="co"># Trials with which _id are missing? </span></span>
<span><span class="va">missingIds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">.maybeRelatedTrials</span><span class="op">)</span>, <span class="va">df</span><span class="op">$</span><span class="va">`_id`</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load missing trials by _id</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">missingIds</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="va">i</span>, <span class="st">": "</span>, <span class="va">missingIds</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">res</span>, <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span><span class="va">missingIds</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, euctrresults <span class="op">=</span> <span class="cn">TRUE</span>, con <span class="op">=</span> <span class="va">db</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Trials that could not be loaded are likely phase 1 trials </span></span>
<span><span class="co"># which are not publicly accessible in the in EUCTR register</span></span>
<span><span class="va">missingIds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"[["</span>, <span class="st">"n"</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0L</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>The above loads one trial after the other, just using the
<code>_id</code> of the trial, from which <code>ctrdata</code> infers
the concerned register. Alternatively, batches of <code>_id</code>s can
be loaded from some registers (not CTIS), as follows.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ids of trials of interest</span></span>
<span><span class="va">ctIds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"NCT00001209"</span>, <span class="st">"NCT00001436"</span>, <span class="st">"NCT00187109"</span>, <span class="st">"NCT01516567"</span>, <span class="st">"NCT01471782"</span>, </span>
<span>  <span class="st">"NCT00357084"</span>, <span class="st">"NCT00357500"</span>, <span class="st">"NCT00365755"</span>, <span class="st">"NCT00407433"</span>, <span class="st">"NCT00410657"</span>, </span>
<span>  <span class="st">"NCT00436852"</span>, <span class="st">"NCT00445965"</span>, <span class="st">"NCT00450307"</span>, <span class="st">"NCT00450827"</span>, <span class="st">"NCT00471679"</span>, </span>
<span>  <span class="st">"NCT00492167"</span>, <span class="st">"NCT00499616"</span>, <span class="st">"NCT00503724"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># split into sets of each 10 trial ids </span></span>
<span><span class="co"># (larger sets e.g. 50 may still work)</span></span>
<span><span class="va">idSets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">ctIds</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">ctIds</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># variable to collect import results</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># iterate over sets of trial ids</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">idSet</span> <span class="kw">in</span> <span class="va">idSets</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">setResult</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a></span><span class="op">(</span></span>
<span>    queryterm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"term="</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">idSet</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    register <span class="op">=</span> <span class="st">"CTGOV2"</span>,</span>
<span>    con <span class="op">=</span> <span class="va">db</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># check that queried ids have</span></span>
<span>  <span class="co"># successfully been loaded</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">setResult</span><span class="op">$</span><span class="va">success</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">idSet</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># append result</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">result</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">setResult</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># inspect results </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">result</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"failed"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#    n failed</span></span>
<span><span class="co"># 1 10   NULL</span></span>
<span><span class="co"># 2  8   NULL</span></span>
<span></span>
<span><span class="co"># queryterms for other registers for retrieving trials by their identifier: </span></span>
<span><span class="co">#</span></span>
<span><span class="co"># CTIS (note the comma separated values): </span></span>
<span><span class="co"># https://euclinicaltrials.eu/ctis-public/search#searchCriteria=</span></span>
<span><span class="co"># {"containAny":"2025-521008-22-00, 2024-519446-67-00, 2024-517647-31-00"}</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># EUCTR (note the country suffix os to be removed, values separated with OR): </span></span>
<span><span class="co"># https://www.clinicaltrialsregister.eu/ctr-search/search?</span></span>
<span><span class="co"># query=2008-001606-16+OR+2008-001721-34+OR+2008-002260-33</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ralf Herold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
