<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get identifiers of deduplicated trial records — dbFindIdsUniqueTrials • ctrdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get identifiers of deduplicated trial records — dbFindIdsUniqueTrials"><meta name="description" content="Records for a clinical trial can be loaded from more than one
register into a collection. This function returns deduplicated
identifiers for all trials in the collection, respecting the
register(s) preferred by the user. All registers are recording
identifiers also from other registers, which are used by this
function to provide a vector of identifiers of deduplicated trials."><meta property="og:description" content="Records for a clinical trial can be loaded from more than one
register into a collection. This function returns deduplicated
identifiers for all trials in the collection, respecting the
register(s) preferred by the user. All registers are recording
identifiers also from other registers, which are used by this
function to provide a vector of identifiers of deduplicated trials."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rfhb"><meta name="twitter:site" content="@rfhb"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ctrdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.19.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ctrdata_install.html">Install R package ctrdata</a></li>
    <li><a class="dropdown-item" href="../articles/ctrdata_retrieve.html">Retrieve clinical trial information</a></li>
    <li><a class="dropdown-item" href="../articles/ctrdata_summarise.html">Summarise and analyse clinical trial information</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rfhb/ctrdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get identifiers of deduplicated trial records</h1>
      <small class="dont-index">Source: <a href="https://github.com/rfhb/ctrdata/blob/HEAD/R/dbFindIdsUniqueTrials.R" class="external-link"><code>R/dbFindIdsUniqueTrials.R</code></a></small>
      <div class="d-none name"><code>dbFindIdsUniqueTrials.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Records for a clinical trial can be loaded from more than one
register into a collection. This function returns deduplicated
identifiers for all trials in the collection, respecting the
register(s) preferred by the user. All registers are recording
identifiers also from other registers, which are used by this
function to provide a vector of identifiers of deduplicated trials.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dbFindIdsUniqueTrials</span><span class="op">(</span></span>
<span>  preferregister <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EUCTR"</span>, <span class="st">"CTGOV"</span>, <span class="st">"CTGOV2"</span>, <span class="st">"ISRCTN"</span>, <span class="st">"CTIS"</span><span class="op">)</span>,</span>
<span>  prefermemberstate <span class="op">=</span> <span class="st">"DE"</span>,</span>
<span>  include3rdcountrytrials <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">con</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-preferregister">preferregister<a class="anchor" aria-label="anchor" href="#arg-preferregister"></a></dt>
<dd><p>A vector of the order of preference for
registers from which to generate unique _id's, default
<code>c("EUCTR", "CTGOV", "CTGOV2", "ISRCTN", "CTIS")</code></p></dd>


<dt id="arg-prefermemberstate">prefermemberstate<a class="anchor" aria-label="anchor" href="#arg-prefermemberstate"></a></dt>
<dd><p>Code of single EU Member State for which records
should returned. If not available, a record for DE or lacking this, any
random Member State's record for the trial will be returned.
For a list of codes of EU  Member States, please see vector
<code>countriesEUCTR</code>. Specifying "3RD" will return the Third Country
record of trials, where available.</p></dd>


<dt id="arg-include-rdcountrytrials">include3rdcountrytrials<a class="anchor" aria-label="anchor" href="#arg-include-rdcountrytrials"></a></dt>
<dd><p>A logical value if trials should be retained
that are conducted exclusively in third countries, that is, outside
the European Union. Ignored if <code>prefermemberstate</code> is set to "3RD".</p></dd>


<dt id="arg-con">con<a class="anchor" aria-label="anchor" href="#arg-con"></a></dt>
<dd><p>A connection object, see section
`Databases` in <a href="ctrdata.html">ctrdata</a>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If <code>TRUE</code>, prints out the fields of registers used to
find corresponding trial records</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named vector with strings of keys (field "_id") of
records in the collection that represent unique trials, where
names correspond to the register of the record.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Note that the content of records may differ between registers
(and, for "EUCTR", between records for different Member States).
Such differences are not considered by this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dbc</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_sqlite.html" class="external-link">src_sqlite</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    dbname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"demo.sqlite"</span>, package <span class="op">=</span> <span class="st">"ctrdata"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    collection <span class="op">=</span> <span class="st">"my_trials"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> RSQLite version has enabled accelerating docdb_create() and docdb_update() functions when used with value = &lt;NDJSON file name&gt;.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">dbFindIdsUniqueTrials</span><span class="op">(</span>con <span class="op">=</span> <span class="va">dbc</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Searching for duplicate trials... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Getting all trial identifiers...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  (may take some time)...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> , 29 found in collection</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Finding duplicates among registers' and sponsor ids...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - 2 EUCTR _id were not preferred EU Member State record for 8 trials</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> - Keeping 3 / 8 / 5 / 8 / 3 records from EUCTR / CTGOV / CTGOV2 / ISRCTN / CTIS</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> = Returning keys (_id) of 27 records in collection "my_trials"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              ISRCTN              ISRCTN              ISRCTN               EUCTR </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          "12949496"          "13281214"          "17473621" "2012-003632-23-SE" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               EUCTR               EUCTR                CTIS                CTIS </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "2014-002606-20-PT" "2014-003556-31-SE" "2022-501142-30-00" "2023-505613-24-00" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                CTIS              ISRCTN              ISRCTN              ISRCTN </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "2024-510663-34-00"          "20343063"          "61070850"          "76463425" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              ISRCTN              ISRCTN              CTGOV2              CTGOV2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          "80181452"          "88261002"       "NCT00617929"       "NCT01125800" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              CTGOV2              CTGOV2              CTGOV2               CTGOV </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       "NCT01483820"       "NCT01505608"       "NCT01592045"       "NCT02620761" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               CTGOV               CTGOV               CTGOV               CTGOV </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       "NCT03280147"       "NCT03325439"       "NCT03431558"       "NCT03876704" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               CTGOV               CTGOV               CTGOV </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       "NCT04001712"       "NCT04041765"       "NCT05969327" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"ctrdata-dbname")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/Users/ralfherold/Library/R/arm64/4.4/library/ctrdata/extdata/demo.sqlite"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"ctrdata-table")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "my_trials"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"ctrdata-table-note")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "^^^ attr ctrdata-table will be removed by end 2024"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"ctrdata-collection")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "my_trials"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"ctrdata-dbqueryhistory")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       query-timestamp query-register query-records</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2024-05-16 14:05:23          EUCTR             5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2024-05-16 14:06:43          CTGOV             8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2024-05-16 14:07:32         ISRCTN             8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2024-05-16 14:07:57         CTGOV2             5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2024-06-23 16:14:56           CTIS             3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                                       query-term</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                    query=&amp;age=newborn&amp;phase=phase-three&amp;dateFrom=2015-02-28&amp;dateTo=2015-03-31&amp;status=completed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 term=AREA[MaximumAge]+RANGE[0+days,+28+days]&amp;intr=Drugs,+Investigational&amp;strd_s=01/01/2018&amp;strd_e=01/01/2020&amp;type=Intr&amp;phase=2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                                                                    q=&amp;filters=ageRange:Neonate,phase:Phase+III</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                  distance=50&amp;cond=neuroblastoma&amp;aggFilters=phase:2,results:with&amp;primComp=2014-01-01_2014-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                              searchCriteria={"containAll":"infection","containAny":"neonates","containNot":""}</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ralf Herold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

