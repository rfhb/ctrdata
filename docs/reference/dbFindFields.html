<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Find names of fields in the database collection — dbFindFields • ctrdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Find names of fields in the database collection — dbFindFields"><meta name="description" content="Given part of the name of a field of interest to the user, this
function returns the full field names used in records that were
previously loaded into a collection
(using ctrLoadQueryIntoDb). Only names of fields that have
a value in the collection can be returned.
Set sample = FALSE to force screening all records in the
collection for field names, see below.
See ctrShowOneTrial to interactively find fields."><meta property="og:description" content="Given part of the name of a field of interest to the user, this
function returns the full field names used in records that were
previously loaded into a collection
(using ctrLoadQueryIntoDb). Only names of fields that have
a value in the collection can be returned.
Set sample = FALSE to force screening all records in the
collection for field names, see below.
See ctrShowOneTrial to interactively find fields."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ctrdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.21.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ctrdata_install.html">Install R package ctrdata</a></li>
    <li><a class="dropdown-item" href="../articles/ctrdata_retrieve.html">Retrieve clinical trial information</a></li>
    <li><a class="dropdown-item" href="../articles/ctrdata_summarise.html">Summarise and analyse clinical trial information</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rfhb/ctrdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Find names of fields in the database collection</h1>
      <small class="dont-index">Source: <a href="https://github.com/rfhb/ctrdata/blob/HEAD/R/dbFindFields.R" class="external-link"><code>R/dbFindFields.R</code></a></small>
      <div class="d-none name"><code>dbFindFields.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given part of the name of a field of interest to the user, this
function returns the full field names used in records that were
previously loaded into a collection
(using <a href="ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a>). Only names of fields that have
a value in the collection can be returned.
Set <code>sample = FALSE</code> to force screening all records in the
collection for field names, see below.
See <a href="ctrShowOneTrial.html">ctrShowOneTrial</a> to interactively find fields.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dbFindFields</span><span class="op">(</span>namepart <span class="op">=</span> <span class="st">".*"</span>, <span class="va">con</span>, sample <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-namepart">namepart<a class="anchor" aria-label="anchor" href="#arg-namepart"></a></dt>
<dd><p>A character string (can be a regular expression,
including Perl-style) to be searched among all field names (keys)
in the collection, case-insensitive. The default `".*"` lists all fields.</p></dd>


<dt id="arg-con">con<a class="anchor" aria-label="anchor" href="#arg-con"></a></dt>
<dd><p>A database connection object, created with
<code>nodbi</code>. See section `1 - Database connection` in
<a href="ctrdata.html">ctrdata</a>.</p></dd>


<dt id="arg-sample">sample<a class="anchor" aria-label="anchor" href="#arg-sample"></a></dt>
<dd><p>If <code>TRUE</code> (default), uses a sample of only 5 trial
records per register to identify fields, to rapidly return a possibly
incomplete set of field names.
If <code>FALSE</code>, uses all trial records in the collection, which will
take more time with more trials but ensures to returns all names of
all fields in the collection.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If <code>TRUE</code>, prints additional information
(default <code>FALSE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Vector of strings with full names of field(s) found,
ordered by register and alphabet, see examples. Names of the vector
are the names of the register holding the respective fields. The field
names can be fed into <a href="dbGetFieldsIntoDf.html">dbGetFieldsIntoDf</a> to extract the
data for the field(s) from the collection into a data frame.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The full names of child fields are returned in dot notation (e.g.,
<code>clinical_results.outcome_list.outcome.measure.class_list.class.title</code>)
In addition, names of parent fields (e.g.,
<code>clinical_results</code>) are returned.
Data in parent fields is typically complex (nested), see
<a href="dfTrials2Long.html">dfTrials2Long</a> for easily handling it.
For field definitions of the registers, see
"Definition" in <a href="ctrdata-registers.html">ctrdata-registers</a>.
Note: When <code>dbFindFields</code> is first called after
<a href="ctrLoadQueryIntoDb.html">ctrLoadQueryIntoDb</a>, it will take a moment.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dbc</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_sqlite.html" class="external-link">src_sqlite</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dbname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"demo.sqlite"</span>, package <span class="op">=</span> <span class="st">"ctrdata"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  collection <span class="op">=</span> <span class="st">"my_trials"</span>,</span></span>
<span class="r-in"><span>  flags <span class="op">=</span> <span class="fu">RSQLite</span><span class="fu">::</span><span class="va"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLITE_RO</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> RSQLite version has enabled accelerating docdb_create() and docdb_update() functions when used with value = &lt;NDJSON file name&gt;.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">dbFindFields</span><span class="op">(</span>namepart <span class="op">=</span> <span class="st">"date"</span>, con <span class="op">=</span> <span class="va">dbc</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using cache of fields. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                EUCTR </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             "n_date_of_competent_authority_decision" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                EUCTR </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "n_date_of_ethics_committee_opinion" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                EUCTR </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              "p_date_of_the_global_end_of_the_trial" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                EUCTR </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "trialChanges.globalAmendments.globalAmendment.date" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                EUCTR </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "trialInformation.analysisStageDate" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># view all 1880+ fields from all registers:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">allFields</span> <span class="op">&lt;-</span> <span class="fu">dbFindFields</span><span class="op">(</span>con <span class="op">=</span> <span class="va">dbc</span>, sample <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using cache of fields. </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  register <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">allFields</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  field <span class="op">=</span> <span class="va">allFields</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ralf Herold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

