<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Fields in the collection are retrieved into a data frame (or tibble).
Note that fields within the record of a trial can be hierarchical
and structured, that is, nested.
Names of fields can be found with dbFindFields.
The function uses the field names to appropriately type the values
that it returns, harmonising original values (e.g. "Information not present
in EudraCT" to `NA`, "Yes" to `TRUE`, "false" to `FALSE`,
date strings to class Date, number strings to numbers).
The function also attempts to simplify the structure of nested data and
may concatenate multiple strings in a field using " / " (see example).
For full handling of complex nested data, use function dfTrials2Long
followed by dfName2Value to extract the sought nested variable(s).'><title>Create data frame of specified fields from database collection — dbGetFieldsIntoDf • ctrdata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create data frame of specified fields from database collection — dbGetFieldsIntoDf"><meta property="og:description" content='Fields in the collection are retrieved into a data frame (or tibble).
Note that fields within the record of a trial can be hierarchical
and structured, that is, nested.
Names of fields can be found with dbFindFields.
The function uses the field names to appropriately type the values
that it returns, harmonising original values (e.g. "Information not present
in EudraCT" to `NA`, "Yes" to `TRUE`, "false" to `FALSE`,
date strings to class Date, number strings to numbers).
The function also attempts to simplify the structure of nested data and
may concatenate multiple strings in a field using " / " (see example).
For full handling of complex nested data, use function dfTrials2Long
followed by dfName2Value to extract the sought nested variable(s).'><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rfhb"><meta name="twitter:site" content="@rfhb"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ctrdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.15.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ctrdata_install.html">Install R package ctrdata</a>
    <a class="dropdown-item" href="../articles/ctrdata_retrieve.html">Retrieve clinical trial information</a>
    <a class="dropdown-item" href="../articles/ctrdata_summarise.html">Summarise and analyse clinical trial information</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rfhb/ctrdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create data frame of specified fields from database collection</h1>
      <small class="dont-index">Source: <a href="https://github.com/rfhb/ctrdata/blob/HEAD/R/dbGetFieldsIntoDf.R" class="external-link"><code>R/dbGetFieldsIntoDf.R</code></a></small>
      <div class="d-none name"><code>dbGetFieldsIntoDf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fields in the collection are retrieved into a data frame (or tibble).
Note that fields within the record of a trial can be hierarchical
and structured, that is, nested.
Names of fields can be found with <a href="dbFindFields.html">dbFindFields</a>.
The function uses the field names to appropriately type the values
that it returns, harmonising original values (e.g. "Information not present
in EudraCT" to `NA`, "Yes" to `TRUE`, "false" to `FALSE`,
date strings to class Date, number strings to numbers).
The function also attempts to simplify the structure of nested data and
may concatenate multiple strings in a field using " / " (see example).
For full handling of complex nested data, use function <a href="dfTrials2Long.html">dfTrials2Long</a>
followed by <a href="dfName2Value.html">dfName2Value</a> to extract the sought nested variable(s).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dbGetFieldsIntoDf</span><span class="op">(</span>fields <span class="op">=</span> <span class="st">""</span>, <span class="va">con</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, stopifnodata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fields</dt>
<dd><p>Vector of one or more strings, with names of sought fields.
See function <a href="dbFindFields.html">dbFindFields</a> for how to find names of fields.
"item.subitem" notation is supported.</p></dd>


<dt>con</dt>
<dd><p>A connection object, see section
`Databases` in <a href="ctrdata.html">ctrdata</a>.</p></dd>


<dt>verbose</dt>
<dd><p>Printing additional information if set to <code>TRUE</code>;
(default <code>FALSE</code>).</p></dd>


<dt>stopifnodata</dt>
<dd><p>Stops with an error (detaul <code>TRUE</code>) or with
a warning (<code>FALSE</code>) if the sought field is empty in all,
or not available in any of the records in the database collection.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame (or tibble, if <code>tibble</code> is loaded)
with columns corresponding to the sought fields.
A column for the records' `_id` will always be included.
Each column can be either a simple data type (numeric, character, date)
or a list (typically for nested data, see above). For complicated lists,
use function <a href="dfTrials2Long.html">dfTrials2Long</a> followed by function <a href="dfName2Value.html">dfName2Value</a></p>


<p>to extract values for sought nested variables.
The maximum number of rows of the returned data frame is equal to,
or less than the number of records of trials in the database
collection.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dbc</span> <span class="op">&lt;-</span> <span class="fu">nodbi</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/nodbi/reference/src_sqlite.html" class="external-link">src_sqlite</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   dbname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"demo.sqlite"</span>, package <span class="op">=</span> <span class="st">"ctrdata"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   collection <span class="op">=</span> <span class="st">"my_trials"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get fields that are nested within another field</span></span></span>
<span class="r-in"><span><span class="co"># and can have multiple values with the nested field</span></span></span>
<span class="r-in"><span><span class="fu">dbGetFieldsIntoDf</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="st">"b1_sponsor.b31_and_b32_status_of_the_sponsor"</span>,</span></span>
<span class="r-in"><span>  con <span class="op">=</span> <span class="va">dbc</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> b1_sponsor.b31_and_b32_status_of_the_sponsor... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> . </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   _id b1_sponsor.b31_and_b32_status_of_the_sponsor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   2012-003632-23-AT                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2012-003632-23-CZ                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   2012-003632-23-DE                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2012-003632-23-ES                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2012-003632-23-GB                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   2012-003632-23-IT                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   2012-003632-23-SE                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2014-002606-20-3RD                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   2014-002606-20-AT                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  2014-002606-20-DE                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  2014-002606-20-ES                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  2014-002606-20-GB                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  2014-002606-20-IT                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  2014-002606-20-PT                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  2014-003556-31-GB                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  2014-003556-31-IT                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  2014-003556-31-NL                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  2014-003556-31-PL                                   Commercial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19  2014-003556-31-SE                                   Commercial</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># fields that are lists of string values are</span></span></span>
<span class="r-in"><span><span class="co"># returned by concatenating values with a slash</span></span></span>
<span class="r-in"><span><span class="fu">dbGetFieldsIntoDf</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="st">"keyword"</span>,</span></span>
<span class="r-in"><span>  con <span class="op">=</span> <span class="va">dbc</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> keyword... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            _id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NCT01035190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NCT01190995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NCT01265589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NCT01389856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NCT01490580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NCT01517828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  NCT01528852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  NCT01536483</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  NCT01720524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 NCT01723501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 NCT01783041</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 NCT01875757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 NCT01899677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 NCT01954082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 NCT02056223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 NCT02374281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 NCT02499393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 NCT03022253</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 NCT03058666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 NCT03082001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 NCT03272594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                                                                                                keyword</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                                                               Preterm Infants / Inhaled Corticosteroids / Bronchopulmonary Dysplasia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                                                                                                                Pain / Neonate / Procedure / Neurobehavioural outcome</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                                                                                                                       RDS / Infant, newborn / Vitamin A / Surfactant</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                                                                                                                    Persistent pulmonary hypertension, newborn / PPHN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                                                                                 Pain / Newborn / Anaesthesia / opioids / propofol / neuromuscular blocker / atropine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                                                                                                                    Intubation / Delivery room / Sedation / Analgesia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                                                                                  neonatal Mortality / chlorhexidine cord care / cord infections / african settings / clinical trials</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                     Butyrate / Preterms / Very Low Birth Weight (&lt;1250g) / Rectocolonic enemas / Digestive maturation / Parenteral nutrition weaning / ECUN / Whole gut transit time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                 persistent pulmonary hypertension / newborn / neonates / iv sildenafil / hypoxic respiratory failure and at risk of persistent pulmonary hypertension of the newborn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                                                                                                                       chlorhexidine / sepsis / neonatal / whole-body skin cleansing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    Prematurity / Carnitine supplementation / Neonatal Intensive Care / MRI / Amplitude-integrated EEG / NICU Network Neurobehavioral Scale / Bayley Scale of Infant Development III</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                                             Vitamin D / Acute bronchitis / Upper respiratory tract infection / Recurrent bronchitis / Acute bronchiolitis / Infants</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                                                                                                                      Symbiotic,cytokines, necrotising enterocolitis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                                                                                                                               Retinopathy / Prematurity / Infant, Newborn, Diseases</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                                                                                                                 Patent ductus arteriosus / Preterm infant / Paracetamol / Ibuprofen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 Newborn / Neonatal Screening / Autonomic Nervous System / Pain / non-nutritive sucking / sucrose administration / nociceptive action / Electro acoustical characteristics of crying</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17                                                                                                                              newborn / therapeutic hypothermia / magnesium sulphate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18                                                                                                                                                                     PDA / Platelets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19                                                                           Aerosol / surfactant / calfactant / Infasurf / Respiratory Distress Syndrome / RDS / Premature / Neonates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20                                                                                                                                                               Neonate / Pain / ELBW</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21             Neonatal pain / Pediatric pain / Pain assessment / Breastfeeding / Sucrose / Randomized controlled trial / Behavioural pain response / Neurophysiological pain response</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ralf Herold.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

